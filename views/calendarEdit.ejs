<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cadastrar Compromisso</title>
  <link rel="stylesheet" href="/index.css" />
  <link rel="stylesheet" href="/nav.css" />
  <link rel="stylesheet" href="/footer.css" />
</head>
<body>
  <div class="container">
    <form class="form" method="POST" action="/calendar/add">
      <h1>Cadastrar Compromisso</h1>
      <input type="hidden" name="id" id="event-id" value="<%= event.id %>" />
      <%
          const iso = event.date.split('T')[0];
          const [y, m, d] = iso.split('-');
          const dataFormatted = `${d}/${m}/${y}`;   
      %>
      <label for="date">Data atual: <%= dataFormatted %></label>
      <input type="date" name="date" id="date" required>
      <select name="type_envent" id="type" required>
        <option value="Atendimento">Atendimento</option>
        <option value="Pregação">Pregação</option>
        <option value="Família">Família</option>
        <option value="Reunião">Reunião</option>
        <option value="Férias">Férias</option>
        <option value="Educação">Educação</option>
      </select>
      <select name="pastor" id="pastor" required>
        <option value="<%= user %>" selected><%= user %></option>
        <% pastors.forEach(name_pastor => { %>
          <option value="<%= name_pastor %>"
            <%= pastors === name_pastor ? 'selected' : '' %>>
            <%= name_pastor %>
          </option>
        <% }) %>
      </select>
      <label for="church">Local:</label>
        <select name="church" id="church" required>
          <option value="" disabled>Selecione o local</option>
          <% churches.forEach(name_church => { %>
            <option value="<%= name_church %>"
              <%= churches === name_church ? 'selected' : '' %>>
              <%= name_church %>
            </option>
          <% }) %>
        </select>
      <div id="form-buttons">
        <button type="submit" id="submit-btn">Adicionar</button>
      </div>
    </form>
  </div>
  <%- include('partials/nav') %>
  <script>
        const tipoPadrao = '<%= event ? event.type_envent : "" %>';
          if (tipoPadrao) {
          document.getElementById('type').value = tipoPadrao;
        } 
  </script>
</body>
</html>
